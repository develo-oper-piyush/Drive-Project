<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" href="/favicon2.png" type="image/x-icon" />
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
        <title>Login</title>
    </head>
    <body
        class="m-0 p-0 flex justify-center items-center box-border font-gilroy font-bold select-none w-screen h-screen bg-gray-200 dark:bg-[#272727]"
    >
        <!-- Toast Notification -->
        <div
            id="toast"
            class="hidden fixed top-5 right-5 bg-emerald-600 text-white px-6 py-4 rounded-lg shadow-xl z-50 flex items-center gap-3 animate-slide-in"
        >
            <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M5 13l4 4L19 7"
                ></path>
            </svg>
            <div>
                <p class="font-bold">Registration Successful!</p>
                <p id="toast-message" class="text-sm"></p>
            </div>
            <button
                onclick="closeToast()"
                class="ml-4 hover:bg-emerald-700 rounded p-1"
            >
                <svg
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M6 18L18 6M6 6l12 12"
                    ></path>
                </svg>
            </button>
        </div>

        <style>
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            .animate-slide-in {
                animation: slideIn 0.3s ease-out;
            }
        </style>

        <form
            action="/user/login"
            method="post"
            class="text-white dark:bg-emerald-900 bg-gray-800 rounded-2xl p-4 flex flex-col justify-center items-start gap-4 shadow-lg"
        >
            <h1 class="w-full flex items-center justify-center text-2xl">
                Login User
            </h1>
            <div class="w-full flex justify-around items-center gap-4">
                <svg
                    width="20"
                    height="20"
                    viewBox="0 0 15 15"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M7.5 0.875C5.49797 0.875 3.875 2.49797 3.875 4.5C3.875 6.15288 4.98124 7.54738 6.49373 7.98351C5.2997 8.12901 4.27557 8.55134 3.50407 9.31167C2.52216 10.2794 2.02502 11.72 2.02502 13.5999C2.02502 13.8623 2.23769 14.0749 2.50002 14.0749C2.76236 14.0749 2.97502 13.8623 2.97502 13.5999C2.97502 11.8799 3.42786 10.7206 4.17091 9.9883C4.91536 9.25463 6.02674 8.87499 7.49995 8.87499C8.97317 8.87499 10.0846 9.25463 10.8291 9.98831C11.5721 10.7206 12.025 11.8799 12.025 13.5999C12.025 13.8623 12.2376 14.0749 12.5 14.0749C12.7623 14.075 12.975 13.8623 12.975 13.6C12.975 11.72 12.4778 10.2794 11.4959 9.31166C10.7244 8.55135 9.70025 8.12903 8.50625 7.98352C10.0187 7.5474 11.125 6.15289 11.125 4.5C11.125 2.49797 9.50203 0.875 7.5 0.875ZM4.825 4.5C4.825 3.02264 6.02264 1.825 7.5 1.825C8.97736 1.825 10.175 3.02264 10.175 4.5C10.175 5.97736 8.97736 7.175 7.5 7.175C6.02264 7.175 4.825 5.97736 4.825 4.5Z"
                        fill="currentColor"
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                    ></path>
                </svg>
                <label for="username" class="">Username: </label>
                <input
                    type="text"
                    required
                    name="username"
                    class="p-1 outline-none dark:bg-emerald-950 bg-gray-600 rounded-md"
                    placeholder="Someone_123"
                />
            </div>
            <div class="w-full flex justify-end items-center gap-4">
                <svg
                    width="20"
                    height="20"
                    viewBox="0 0 15 15"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z"
                        fill="currentColor"
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                    ></path>
                </svg>
                <label for="pass" class="">Password: </label>
                <input
                    type="password"
                    style="letter-spacing: 4px"
                    required
                    name="pass"
                    class="p-1 outline-none dark:bg-emerald-950 bg-gray-600 rounded-md"
                    placeholder=" * * * * * * * * * * * "
                />
            </div>
            <div class="flex justify-center w-full h-10 relative">
                <button
                    type="submit"
                    class="bg-emerald-500 rounded-lg p-2 ring-slate-600 ring-2 hover:bg-emerald-300 cursor-pointer active:scale-90 transition-all duration-200 shadow-xl flex items-center gap-2"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-circle-check-icon lucide-circle-check"
                    >
                        <circle cx="12" cy="12" r="10" />
                        <path d="m9 12 2 2 4-4" />
                    </svg>
                    <span>Login</span>
                </button>
                <button
                    type="reset"
                    class="bg-red-500 rounded-lg p-2 ring-slate-600 ring-2 hover:bg-red-300 cursor-pointer active:scale-90 transition-all duration-200 shadow-xl flex items-center gap-2 absolute right-0"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-circle-x-icon lucide-circle-x"
                    >
                        <circle cx="12" cy="12" r="10" />
                        <path d="m15 9-6 6" />
                        <path d="m9 9 6 6" />
                    </svg>
                    <span>Clear</span>
                </button>
            </div>
        </form>

        <script>
            // Check for registration success
            const urlParams = new URLSearchParams(window.location.search);
            const registered = urlParams.get("registered");
            const username = urlParams.get("username");
            const email = urlParams.get("email");

            if (registered === "true" && username) {
                const toast = document.getElementById("toast");
                const toastMessage = document.getElementById("toast-message");
                toastMessage.textContent = `User "${username}" (${email}) registered successfully!`;
                toast.classList.remove("hidden");

                // Auto-hide after 5 seconds
                setTimeout(() => {
                    closeToast();
                }, 5000);

                // Clean URL
                window.history.replaceState({}, document.title, "/user/login");
            }

            function closeToast() {
                document.getElementById("toast").classList.add("hidden");
            }
        </script>
    </body>
</html>
